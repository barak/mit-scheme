From: Taylor R Campbell <campbell+mit-scheme@mumble.net>
Date: Wed, 3 Feb 2021 06:39:27 +0000
Subject: microcode: Pacify clang's objection to gcc asm constraints.

(cherry picked from commit 765ac899ae52b91ce1ee97e3ccae69d408c9930e)
---
 src/microcode/cmpintmd/aarch64.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/src/microcode/cmpintmd/aarch64.c b/src/microcode/cmpintmd/aarch64.c
index d0bad8c..8d5fc0f 100644
--- a/src/microcode/cmpintmd/aarch64.c
+++ b/src/microcode/cmpintmd/aarch64.c
@@ -364,15 +364,17 @@ aarch64_reset_hook (void)
 }
 
 static inline void
-aarch64_cache_line_sizes (unsigned *dsize, unsigned *isize)
+aarch64_cache_line_sizes (unsigned *dsizep, unsigned *isizep)
 {
-  uint64_t ctr_el0;
+  uint64_t ctr_el0, dsize, isize;
 
   asm volatile ("\n\
     mrs %0, ctr_el0\n\
     ubfx %1, %0, #16, #4\n\
     ubfx %2, %0, #0, #4\n\
-  " : "=r"(ctr_el0), "=r"(*dsize), "=r"(*isize));
+  " : "=r"(ctr_el0), "=r"(dsize), "=r"(isize));
+  (*dsizep) = dsize;
+  (*isizep) = isize;
 }
 
 void
