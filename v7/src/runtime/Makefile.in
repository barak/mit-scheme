# $Id: Makefile.in,v 1.8 2003/02/14 18:28:32 cph Exp $
#
# Copyright (c) 2000, 2001 Massachusetts Institute of Technology
#
# This file is part of MIT/GNU Scheme.
#
# MIT/GNU Scheme is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License as
# published by the Free Software Foundation; either version 2 of the
# License, or (at your option) any later version.
#
# MIT/GNU Scheme is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with MIT/GNU Scheme; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
# 02111-1307, USA.

# Standard Makefile for Scheme subsystem directories.
# This makefile supports some utilities for Scheme subsystems.
# Tools to rebuild these subsystems are written in Scheme and do not
# use `make'.

# **** BEGIN BOILERPLATE ****

SHELL = @SHELL@

@SET_MAKE@

srcdir = @srcdir@
top_srcdir = @top_srcdir@
VPATH = @srcdir@
prefix = @prefix@
exec_prefix = @exec_prefix@

bindir = @bindir@
sbindir = @sbindir@
libexecdir = @libexecdir@
datadir = @datadir@
sysconfdir = @sysconfdir@
sharedstatedir = @sharedstatedir@
localstatedir = @localstatedir@
libdir = @libdir@
infodir = @infodir@
mandir = @mandir@
includedir = @includedir@
oldincludedir = /usr/include

DESTDIR =
top_builddir = .

INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_SCRIPT = @INSTALL_SCRIPT@

LN_S = @LN_S@
ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs

# **** END BOILERPLATE ****

AUXDIR = @AUXDIR@
RODIR = $(AUXDIR)/options
RUNOPTS = chrsyn cpress format gdbm hashtb krypt mime-codec numint optiondb \
	  ordvec process rbtree regexp rexp rgxcmp syncproc wttree ystep

all:
	echo "No ALL action"

mostlyclean clean distclean maintainer-clean:
	./Clean.sh $@

tags TAGS:
	./Tags.sh

install:
	$(mkinstalldirs) $(DESTDIR)$(AUXDIR)/SRC/runtime
	$(INSTALL_DATA) *.bci $(DESTDIR)$(AUXDIR)/SRC/runtime/.

	-rm -rf $(DESTDIR)$(RODIR)
	$(mkinstalldirs) $(DESTDIR)$(RODIR)
	@for F in $(RUNOPTS); do \
	    echo "$(INSTALL_DATA) $${F}.com $(DESTDIR)$(RODIR)/.";\
	    $(INSTALL_DATA) $${F}.com $(DESTDIR)$(RODIR)/.;\
	done
	@for F in $(RUNOPTS); do \
	    REL="../SRC/runtime/$${F}.bci";\
	    echo "( cd $(DESTDIR)$(RODIR); $(LN_S) $${REL} . )";\
	    ( cd $(DESTDIR)$(RODIR); $(LN_S) $${REL} . );\
	done

.PHONY: all mostlyclean clean distclean maintainer-clean tags TAGS install
